### gen_feat3.py
Generate features for predict what video the user will watch

    userid, continueLast, nextVideo, lastVideo, totalWatchTime, videoCount, totalWatchCount, trainEndTS-lastWatchTS, lastWatchTS-firstWatchTS, watchedVideoMap
    00058293,0,00000251,00000495,124,3,2,21600,3600,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
    00097263,1,00000110,00000110,38662,16,3,1940400,2678400,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0

### tr_video.py
predict what video the user will watch

    13757
    0.560151195755
    [  6.13869518e-02   5.63575488e-02   4.07643875e-02   5.97806546e-02
       5.59173805e-02   3.63247059e-03   3.06696805e-03   3.15900035e-04
       1.87402331e-03   4.87352859e-04   2.15709675e-03   1.84998941e-03
       8.76876733e-06   5.67276286e-04   9.95417309e-04   4.21222048e-04
       4.45135439e-04   1.14687717e-02   2.96631781e-04   9.46240235e-05
       2.49587764e-03   2.21875525e-03   1.30292801e-03   1.20268251e-04
       2.65565347e-04   9.60284349e-03   1.81905895e-03   8.89459310e-05
       1.67168920e-03   7.69177466e-04   4.77500530e-03   1.64380720e-03
       3.00268834e-03   1.74523556e-03   1.61800306e-03   3.16341828e-04
       7.01551815e-04   2.62900539e-04   1.26399537e-03   1.97193377e-03
       9.38885054e-05   2.97380030e-04   1.16372624e-03   1.23195474e-04
       4.00887007e-04   1.68683428e-04   2.98753931e-03   3.28757558e-04
       6.33507352e-04   1.43739823e-03   3.40397415e-03   6.20800642e-04
       4.64606571e-04   9.48974481e-04   6.06948704e-04   4.70034227e-04
       1.55410240e-03   8.74186508e-04   1.38523553e-03   1.76568812e-04
       1.05620214e-02   5.58950231e-03   9.22466524e-05   8.14760352e-04
       1.23504600e-03   3.99704402e-04   7.88362639e-04   4.68784972e-04
       2.62328077e-03   1.16646366e-03   1.16637574e-03   1.01227849e-03
       4.51728296e-04   1.22799494e-03   5.55046436e-04   1.38817569e-03
       2.62153419e-04   1.20252320e-04   4.73492510e-03   1.33397792e-03
       1.46349612e-03   3.28597058e-04   2.61674121e-04   7.19258587e-04
       1.34356802e-04   1.94833183e-03   7.51347258e-04   9.06345109e-04
       2.75322339e-04   3.15158578e-04   1.39944550e-04   7.23023839e-04
       1.80600170e-04   4.19026635e-04   1.94135157e-02   8.43459654e-03
       7.48880289e-04   4.35383246e-04   2.33447703e-03   1.19312335e-02
       4.89724419e-04   3.66675598e-03   2.68939948e-03   3.25360426e-04
       5.56522340e-04   4.58815318e-04   1.11122265e-04   1.90238397e-03
       9.19664603e-04   3.75040012e-04   2.48818254e-03   4.58150132e-04
       3.69231936e-04   2.31601554e-03   1.19321917e-02   2.88721894e-03
       6.87559591e-03   3.63115560e-03   1.87722397e-03   1.72714139e-02
       1.50483549e-02   1.24586413e-03   7.31187070e-03   5.93624211e-03
       8.61482377e-05   3.57568607e-03   2.82152662e-06   8.10817640e-04
       3.71706474e-04   8.76016602e-04   2.79913549e-04   3.50777243e-04
       1.77275284e-05   3.04896239e-04   2.36039271e-04   3.97656194e-03
       3.52503060e-03   9.15694253e-03   9.89250017e-04   9.85823763e-06
       3.62753325e-04   2.36812080e-03   5.64082736e-03   5.57644908e-05
       1.73361258e-02   2.23958724e-03   2.60217795e-03   3.72315357e-03
       4.96132353e-03   5.64151082e-03   4.19405737e-04   1.04237142e-03
       6.98373803e-04   1.05126809e-03   8.25300936e-04   2.53294594e-04
       4.10807580e-05   1.20820720e-03   2.57575286e-03   1.71336137e-04
       1.29771443e-04   2.69074717e-04   7.03091091e-04   1.07658694e-03
       9.46230603e-04   4.12257119e-04   1.54754311e-03   1.51787708e-04
       1.07025757e-03   6.97416116e-04   2.06612607e-03   7.88192831e-04
       1.54538912e-04   9.92733694e-04   7.98451172e-04   1.42520017e-04
       1.06171995e-03   1.83227177e-03   3.60375524e-03   1.98052708e-03
       3.25817404e-03   4.62490394e-04   1.38623204e-03   1.06752296e-04
       3.50944055e-04   4.54747145e-04   1.36084609e-04   4.16682854e-04
       1.01406442e-04   1.37358877e-03   3.60884953e-04   5.22557826e-03
       1.02327016e-03   1.13880184e-04   2.73743670e-03   2.28144276e-03
       1.43105074e-04   1.28120549e-03   2.09884731e-04   5.02351564e-04
       3.70762215e-04   1.42941449e-03   1.40374010e-03   7.14010855e-04
       2.46525548e-04   1.04406221e-04   4.81293847e-04   1.00284956e-03
       1.83583093e-04   3.50588966e-04   1.09556405e-04   4.54780699e-04
       1.77851180e-04   7.07692891e-04   2.12619456e-04   7.51963043e-04
       1.25936435e-04   1.71120155e-03   2.14308812e-02   1.75715444e-03
       8.20664093e-03   8.14779177e-04   7.64736729e-05   1.36603980e-03
       2.52854006e-04   5.03275200e-04   1.51289618e-03   2.86855564e-03
       2.05806351e-02   3.01798380e-04   7.84783484e-03   1.47978683e-03
       1.50185921e-03   5.03367417e-03   3.57553058e-04   2.00275633e-03
       2.99579701e-03   1.47653013e-04   1.17230345e-03   2.05036742e-03
       1.94073235e-03   1.94279133e-03   1.20062127e-03   8.73161854e-03
       5.32780682e-03   2.48776754e-03   4.35921524e-04   1.85249725e-03
       2.23758812e-03   3.37172558e-04   1.23092865e-03   1.09855672e-03
       1.54435614e-04   2.98517618e-03   4.73574879e-03   3.20412745e-03
       1.15237933e-03   2.50557457e-03   2.16477881e-03   1.61088532e-03
       6.43052826e-04   9.07235049e-05   2.79069596e-04   2.08781759e-04
       1.97610060e-05   9.35188705e-04   6.60311870e-04   2.22702532e-02
       4.46346526e-04   1.76973279e-04   7.68788243e-04   8.18854902e-03
       8.86009553e-04   2.14401118e-04   4.11329621e-04   9.21986007e-05
       2.11810176e-04   4.07322685e-04   1.76181573e-03   2.89003452e-03
       1.35739697e-03   2.83443954e-03   4.67699319e-03   7.01211908e-04
       9.29933203e-04   4.16089331e-03   7.37788528e-05   5.84061719e-04
       9.25042782e-05   1.85630978e-03   3.65562484e-03   5.92252500e-04
       2.78982665e-03   2.64516540e-04   3.34032585e-04   6.69112740e-04
       9.64530716e-05   1.92160154e-03   1.31424054e-04   8.97526942e-05
       9.77468354e-04   3.68095113e-04   2.47379161e-04   2.44019664e-04
       2.43793025e-04   1.71000106e-04   1.68654829e-03   8.84647429e-04
       1.01522529e-03   1.04020666e-04   5.69583721e-05   2.37989414e-03
       1.03135079e-03   1.66767913e-03   7.05468145e-04   1.10346810e-02
       3.26706663e-04   2.66407251e-04   2.33375120e-04   9.79471507e-05
       4.75823092e-04   4.52421741e-04   8.34077405e-04   3.60393919e-04
       3.67097072e-04   5.97361269e-04   2.86402969e-04   1.29257106e-04
       2.49026746e-03   1.47624582e-04   4.67552428e-04   1.46505588e-03
       2.14923913e-03   1.38466469e-04   5.77425506e-04   1.51276652e-07
       3.00555908e-04   5.19418361e-04   1.55012458e-04   1.06711081e-05
       3.30700459e-04   4.45256826e-03   5.16337486e-04   4.41934217e-04
       1.24572852e-03   9.11874794e-04   4.78142539e-04   3.73703339e-03
       5.68928840e-04   4.70049270e-04   5.99647605e-04   2.66059436e-03
       3.82003364e-03   3.30768871e-04   5.02992634e-04   3.95247422e-03
       1.34906422e-02   7.03326864e-04   1.38539732e-03   7.68621396e-05
       1.48641378e-04   7.29422595e-04   2.19984640e-04   6.99512168e-04
       1.76522895e-03   1.34955451e-03   2.78507220e-03   1.08643805e-04
       2.45310456e-03   3.95763170e-05   3.73883246e-05   4.77031813e-04
       2.92078188e-04   2.41822831e-04   1.43642018e-04   8.55419690e-04
       2.29596885e-04   2.40097324e-04   3.60358922e-04   1.86116632e-03
       4.23591411e-04   6.88039979e-05   1.46917809e-03   7.62136138e-04
       1.30716554e-03   1.05309282e-03   8.18390903e-04   3.96747857e-04
       2.57917449e-04   7.60024337e-04   4.34609786e-04   9.31780398e-05
       2.10224972e-04   1.93996314e-04   4.05008925e-03   1.73716404e-04
       2.12677338e-04   2.48661786e-04   3.96391873e-04   5.29878484e-04
       3.77475126e-03   5.49309099e-05   1.44265735e-03   2.53631951e-04
       1.91877377e-03   2.09347579e-03   2.30240593e-03   1.57833674e-03
       3.07745724e-04   0.00000000e+00   5.26998642e-04   6.90630107e-04
       1.22529007e-03   1.66597002e-04   2.92345731e-04   6.84153796e-03
       2.22292306e-04   2.23877858e-03   4.90113886e-04]
    [[ 271    0   25   25  222  597    2]
     [  10  569    3   27  183  920    3]
     [  17    0  342   13  250  838    4]
     [  13    0    4  714  147  957    2]
     [  12    0   11    5 2013  831    1]
     [   8    0   19   15  174 3517    0]
     [   5    0   13    2  150  543  280]]
                 precision    recall  f1-score   support
    
       00000110       0.81      0.24      0.37      1142
       00000265       1.00      0.33      0.50      1715
       00000391       0.82      0.23      0.36      1464
       00000628       0.89      0.39      0.54      1837
       00000664       0.64      0.70      0.67      2873
       00000669       0.43      0.94      0.59      3733
       00000673       0.96      0.28      0.44       993
    
    avg / total       0.72      0.56      0.53     13757

    $ t_video.csv  | awk -F, '{print $2}' | sort | uniq -c | sort -nr | head
      29883 00000669
       7509 00000664
       2187 00000628
       1096 00000391
        654 00000110
        132 00000265
         78 00000673

